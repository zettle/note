# 悬停提示

在vscode停在某个单词上，vscode默认就会帮我们预览一部分内容作为提示。

如果想获得更多的提示，我们还可以通过`vscode.languages.registerHoverProvider()`命令来实现。

当有多个hover提示的时候，vscode会将其合并起来全展示出来

```ts
import { existsSync } from "fs";
import { dirname } from "path";
import * as vscode from "vscode";

export function activate(context: vscode.ExtensionContext) {
  context.subscriptions.push(
    vscode.languages.registerHoverProvider("json", {
      provideHover(document, position, token) {
        const fileName = document.fileName;
				console.log('fileName===>', fileName);
        const workDir = dirname(fileName);
        const word = document.getText(document.getWordRangeAtPosition(position));
        if (/package\.json$/.test(fileName)) {
          const json = document.getText();
          if (new RegExp(`"(dependencies|devDependencies)":\\s*?\\{[\\s\\S]*?${word.replace(/\//g,"\\/")}[\\s\\S]*?\\}`,"gm").test(json)) {
            let destPath = `${workDir}/node_modules/${word.replace(/"/g,"")}/package.json`;
            if (existsSync(destPath)) {
              const content = require(destPath);
              // hover内容支持markdown语法
              return new vscode.Hover(
                `* **名称**：${content.name}\n* **版本**：${content.version}\n* **许可协议**：${content.license}`
              );
            }
          }
        }
      },
    })
  );
}
```

实现效果如下：

![image-20250123221559160](img/119-悬停提示/image-20250123221559160.png)