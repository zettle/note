# 单测场景

## 1、单测emit事件

比如有组件`Hello.vue`

```vue
<template>
    <div>
        <button @click="onClick">点击</button>
    </div>
</template>

<script lang="ts" setup>
const emit = defineEmits<{
    'sure': [payload: string, age: number];
}>();

function onClick () {
    emit('sure', 'xiaoming', 23)
}
</script>
```

现在测试emit事件是否正常，代码如下：

```ts
const wrapper = mount(Hello);
const closeButton = wrapper.find("button");
await closeButton.trigger("click"); // 需要加上await，等promise处理
expect(wrapper.emitted()).toHaveProperty("sure");
expect(wrapper.emitted().sure).toBeTruthy();
expect(wrapper.emitted().sure[0]).toEqual(['xiaoming']);
```

`emitted()` 返回一个对象，有所有事件，格式：`{ sure: [ [ 'xiaoming', 23 ] ], click: [ [ [MouseEvent] ] ] }`

从上面格式可以看到，key是事件名，值是二维数组，emit出来的具体数据就放在其中。

